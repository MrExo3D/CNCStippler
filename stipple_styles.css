/* ==========================================================================
   THEME & GLOBALS
   ========================================================================== */
:root{
  --bg:#0b0d10;
  --panel:#14181e;
  --ink:#e6e6e6;
  --muted:#9aa4b2;
  --brand:#0ea5e9;
  --bar:#1f2937;
  --barfill:#0ea5e9;
  --bd:#1f2630;
  --chip:#0d131a;
}

html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--ink);
  font-family:system-ui,Segoe UI,Inter,Roboto,Arial,sans-serif;
}

.wrap{max-width:1280px;margin:20px auto;padding:0 12px}
h1{margin:0 0 8px;font-size:clamp(20px,2.5vw,28px)}
p{margin:0 0 12px;color:var(--muted)}

.shell{display:grid;gap:12px}
@media (min-width:1100px){.shell{grid-template-columns:520px 1fr}}

.card{
  background:var(--panel);
  border:1px solid var(--bd);
  border-radius:14px;
  padding:14px;
}

.badge{
  display:inline-flex;gap:6px;align-items:center;
  padding:3px 9px;border-radius:999px;
  background:var(--chip);
  border:1px solid #243041;
  color:#9aa4b2;font-size:12px
}

.section{display:grid;gap:8px;margin-bottom:12px}
.section h2{
  font-size:12px;color:#b9c4d2;letter-spacing:.04em;
  text-transform:uppercase;margin:0
}

.grid-2{display:grid;gap:8px;grid-template-columns:1fr 1fr}
.grid-3{display:grid;gap:8px;grid-template-columns:repeat(3,1fr)}
.row{display:grid;gap:6px}
label{font-size:12px;color:var(--muted)}

.control-inline{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center}
.controls-tight{display:flex;gap:8px;flex-wrap:wrap;align-items:center}

input[type="number"],input[type="file"],input[type="range"],select{
  width:100%;padding:8px 10px;background:#0f141a;
  border:1px solid #273141;border-radius:10px;
  color:#e6e6e6;outline:none
}
input[type="range"]{padding:0;height:28px}
input[type="color"]{width:48px;height:28px;border-radius:8px;border:1px solid #273141;background:#0f141a}

.short{max-width:150px}
.narrow{max-width:130px}

.btns{display:flex;flex-wrap:wrap;gap:8px;margin-top:4px}
button{padding:8px 12px;border-radius:10px;border:1px solid #263040;background:#0f141a;color:#e6e6e6;cursor:pointer}
button.primary{background:var(--brand);border:none;color:#051015}
button:disabled{opacity:.6;cursor:not-allowed}

.preview{position:relative;display:grid;grid-template-rows:auto 1fr;gap:8px;min-height:320px}
canvas{width:100%;height:auto;border-radius:12px;background:#0b0e13}

.progress{display:flex;align-items:center;gap:8px;width:100%}
.bar{flex:1;height:10px;border-radius:999px;background:var(--bar);overflow:hidden}
.fill{height:100%;width:0%;background:var(--barfill);transition:width .14s linear}
.pct{min-width:46px;text-align:right;color:#e6e6e6;font-variant-numeric:tabular-nums}

.overlay{
  position:absolute;inset:48px 0 0 0;display:none;place-items:center;
  background:rgba(11,13,16,.55);backdrop-filter:saturate(1.2) blur(2px);
  border-radius:12px
}
.overlay.show{display:grid}
.spinner{width:24px;height:24px;border-radius:50%;border:4px solid #2a3340;border-top-color:var(--brand);animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

.highlight{outline:2px solid #3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,.35) inset}

.statusLine{display:flex;justify-content:space-between;align-items:center;margin-top:6px;flex-wrap:wrap;gap:8px}
.previewStage{position:relative}
.overlayBox{display:flex;flex-direction:column;align-items:center;gap:8px}
